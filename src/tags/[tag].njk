---
layout: layout.njk
pagination:
  data: collections.all | getAllTags
  size: 1
  alias: tag
permalink: "{% if tag %}/tags/{{ tag | slug }}/{% else %}/_ignore/{{ random() }}.html{% endif %}"
eleventyComputed:
  tag: tag
---

<h1>Tag: {{ tag }}</h1>
<ul>
{% for post in posts %}
  {# Robust tags: always array #}
  {% set postTags = post.data.tags %}
  {% if postTags %}
    {% if postTags is string %}
      {% set postTagsArr = [postTags] %}
    {% else %}
      {% set postTagsArr = postTags %}
    {% endif %}
    {% if tag in postTagsArr %}
      <li>
        <a href="{{ post.url }}">{{ post.data.title }}</a>
        {%- if post.date %} â€” {{ post.date | date("yyyy-MM-dd") }}{% endif %}
      </li>
    {% endif %}
  {% endif %}
{% endfor %}
</ul>